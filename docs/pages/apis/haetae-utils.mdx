import { Callout } from 'nextra-theme-docs'
import PkgManagerTabs from '../../components/PkgManagerTabs'
import TokenLinkCode from '../../components/TokenLinkCode'
import Chip from '../../components/Chip'

export const Path = () => (<Chip label="path" href="./introduction/#path" />)

# `@haetae/utils{:ts}`

`@haetae/utils{:ts}` provides useful unitlities for general Heatae workflow.

## `peerDependencies`

**Note**: This might not be exhaustive and lists only Haetae's packages.

- [`@haetae/core{:ts}`](./haetae-core)

## Dependents

- [`haetae{:ts}`](./haetae)
- [`@haetae/javascript{:ts}`](./haetae-javascript)
- [`@haetae/git{:ts}`](./haetae-git)

## Installation

<Callout>
  **Are you developing a library(e.g. plugin) for Haetae?** <br />
  It might be more suitable to specify `@haetae/utils` as `peerDependencies` than `dependencies`.
</Callout>

### To automatically install `@haetae/utils{:ts}` and its `peerDependencies`

You may want to install `@haetae/utils{:ts}` and its `peerDependencies` all at once. <br/>
[`install-peerdeps`](https://www.npmjs.com/package/install-peerdeps) is a good tool for that.

<br/>

<PkgManagerTabs>
```bash
# As dependencies
npx install-peerdeps @haetae/utils
# As devDependencies
npx install-peerdeps --dev @haetae/utils
```
```bash
# As dependencies
npx install-peerdeps --yarn @haetae/utils
# As devDependencies
npx install-peerdeps --yarn --dev @haetae/utils
```
```bash
# As dependencies
npx install-peerdeps --pnpm @haetae/utils
# As devDependencies
npx install-peerdeps --pnpm --dev @haetae/utils
```
</PkgManagerTabs>

### To manually handle installation

You might want to manually deal with installation.<br/>
First, install `@haetae/utils{:ts}` itself.

<br/>

<PkgManagerTabs>
```bash
# As dependencies
npm install @haetae/utils
# As devDependencies
npm install --save-dev @haetae/utils
```
```bash
# As dependencies
yarn add @haetae/utils
# As devDependencies
yarn add --dev @haetae/utils
```
```bash
# As dependencies
pnpm add @haetae/utils
# As devDependencies
pnpm add --save-dev @haetae/utils
```
</PkgManagerTabs>

Then, check out `peerDependencies` and manually handle them.<br/>
(e.g. Install them as `dependencies` or set them as `peerDependencies`)

```bash
# This does not install, but just show peerDependencies.
npm info @haetae/utils peerDependencies
```

## API

### `pkg`

Refer to [introduction#pkg](./introduction#pkg).

### `GlobOptions`

A function to add a new record under the given command to store.

[**globby**](https://github.com/sindresorhus/globby/tree/v11.1.0).

<TokenLinkCode tokens={{ 'GlobbyOptions': 'https://github.com/sindresorhus/globby/tree/ca080d8a447e43ad489433ebfb421b176a46dfe1#options'}}>
```ts
interface GlobOptions {
  rootDir?: string // A facade option for `globbyOptions.cwd`
  globbyOptions?: globby.GlobbyOptions
}
```
</TokenLinkCode>

### `glob`
<br/>
<Path/>

A function to find files by glob pattern.<br/>
Internally, the task is delegated to [**`globby` v11**](https://github.com/sindresorhus/globby/tree/v11.1.0).<br/>
`glob` is a [facade function](https://en.wikipedia.org/wiki/Facade_pattern) for `globby`,
providing more handy experience by default options and postprocessing.

<Callout>
  **Why globby v11?** <br />
  From `globby` v12, it becomes [Pure ESM](https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c),
  which may not be compatible to many users.
  `globby` v11 is stable and compatible to any environment no matter what you use/configure.
  Haetae also has a plan to introduce Pure ESM, but it's too early for the ecosystem right now.
</Callout>

**Type**
<br/>
<TokenLinkCode tokens={['GlobOptions']}>
`(patterns: string[], options?: GlobOptions): Promise<string[]> {:ts}`
</TokenLinkCode>

**Arguments**

- `patterns{:ts}`: Array of glob patterns. <small>(e.g. `['**/*.test.ts', '**/*.test.tsx']{:ts}`)</small>
- `options?{:ts}` :
  - `options.rootDir?{:ts}` : A directory to start search. If `options.globbyOptions.cwd{:ts}` is not provided (`undefined{:ts}`), this value is used. Ignored otherwise. <small>(default: [`getConfigDirname(){:ts}`](./haetae-core#getconfigdirname))</small>
  - `options.globbyOptions?{:ts}` : Refer to [globby v11 docs](https://github.com/sindresorhus/globby/tree/ca080d8a447e43ad489433ebfb421b176a46dfe1#options).
